# 更新日志

## [2.0.0] - 2025-07-04

### 重大更新 🚀
- **完全重构**: 基于原项目进行全面重构和增强
- **AI 开发**: 所有代码由 Claude Code 人工智能助手生成

### 新增功能

#### 1. 统一配置管理系统
- **动态配置管理**: 新增运行时配置更新功能
- **Web 配置界面**: 实现可视化配置管理界面
- **配置验证**: 自动验证 API 密钥的有效性
- **配置文件管理**: 支持配置文件的自动创建和更新

#### 2. 增强的 AI 提供商支持
- **DeepSeek**: 新增 DeepSeek 深度求索 AI 支持
- **OpenRouter**: 新增 OpenRouter 多模型聚合平台支持
- **Claude**: 新增 Anthropic Claude AI 支持
- **Gemini**: 新增 Google Gemini 多模态 AI 支持
- **LM Studio**: 新增本地 LM Studio 模型支持
- **智谱 AI**: 新增智谱 GLM 系列模型支持
- **阿里云**: 新增阿里云通义千问系列支持

#### 3. 系统提示词优化
- **提示词合并**: 将系统提示词直接合并到 API 调用的用户消息中
- **一致性保证**: 所有 AI 提供商使用统一的提示词处理机制
- **架构简化**: 移除 wrapped_chatLLM 复杂性，代码更简洁

#### 4. 自动化生成功能
- **批量生成**: 支持自动生成指定章节数的完整小说
- **智能结尾**: 自动检测结尾阶段并生成合适的结尾
- **进度跟踪**: 实时显示生成进度和预计完成时间
- **自动保存**: 自动保存生成的小说到文件
- **中断恢复**: 支持暂停和恢复自动生成过程

#### 5. 改进的用户界面
- **现代化设计**: 基于 Gradio 的响应式用户界面
- **实时预览**: 实时显示生成过程和结果
- **错误处理**: 优雅的错误处理和用户提示
- **配置引导**: 首次使用时的配置向导

#### 6. 文件管理系统
- **自动命名**: 基于小说标题和时间戳自动命名输出文件
- **目录管理**: 自动创建和管理输出目录
- **文件格式**: 优化的文本文件格式，包含标题和章节结构

### 技术改进

#### 代码质量
- **代码重构**: 重构所有核心模块，提高可维护性
- **错误处理**: 增强的异常处理机制
- **类型安全**: 改进的类型注解和参数验证
- **代码清理**: 移除未使用的导入和变量

#### 性能优化
- **流式处理**: 优化流式 API 调用处理
- **内存管理**: 改进的记忆管理和上下文压缩
- **并发处理**: 优化多线程处理逻辑

#### 架构优化
- **模块化设计**: 更清晰的模块分离和依赖关系
- **配置抽象**: 统一的配置管理抽象层
- **插件化架构**: 易于扩展的 AI 提供商插件架构

### 文档更新
- **全新 README**: 完全重写的项目文档
- **配置指南**: 详细的配置和使用指南
- **API 文档**: 完善的 API 接口文档
- **故障排除**: 常见问题和解决方案

### 修复的问题
- **系统提示词**: 修复系统提示词在某些情况下不生效的问题
- **配置同步**: 修复配置更新后不同步的问题
- **内存泄漏**: 修复长时间运行可能的内存泄漏问题
- **异常处理**: 修复多个可能导致程序崩溃的异常

### 破坏性变更
- **配置格式**: 配置文件格式有所变化，需要重新配置
- **API 接口**: 部分内部 API 接口有变更
- **文件结构**: 项目文件结构有调整

---

## [1.0.0] - 原始版本

### 基础功能
- 基于 RecurrentGPT 的循环生成机制
- 多智能体协作框架
- 基础的小说生成功能
- 简单的 Web 界面
- 基础的配置管理

---

## 项目来源

本项目基于 [cjyyx/AI_Gen_Novel](https://github.com/cjyyx/AI_Gen_Novel) 进行二次开发，感谢原作者的贡献。

## 开发声明

v2.0.0 版本完全由 Claude Code 人工智能助手开发，体现了 AI 在软件开发中的应用潜力。