# v3.5.0 æ›´æ–°æ‘˜è¦

## è‹±æ–‡ç‰ˆæœ¬

```markdown
## ğŸ‰ What's New in v3.5.0 (2025-11-05)

**Major Feature Update!** Enhanced generation capabilities, TTS support, and production-ready documentation.

### âœ¨ New Features | æ–°åŠŸèƒ½

- ğŸ™ï¸ **TTS File Processing**: Batch process text files with CosyVoice2 markers for audiobook generation
- ğŸ“ **Long Chapter Mode**: Revolutionary 4-segment generation system
  - Splits each chapter into 4 narrative segments (setup, development, climax, resolution)
  - Each segment generated and polished independently, then merged
  - Enables generation of longer, higher-quality chapters
  - Dramatically improves quality, coherence, and reduces repetition
  - See [LONG_CHAPTER_FEATURE.md](LONG_CHAPTER_FEATURE.md) for technical details
- ğŸ”§ **Modular Refactoring**: Split app.py and AIGN.py into smaller modules
  - 18 AIGN modules for better code organization
  - 4 app modules for cleaner UI and event handling
  - Significantly improves maintainability and readability
- ğŸ“Š **Token Statistics**: Real-time tracking of API token usage during auto-generation
- ğŸ§¹ **Text Sanitization**: Automatic removal of structural tags and non-content annotations
- ğŸ“– **Recent Preview**: Display only recent 5 chapters in UI to reduce browser load
- ğŸš« **Anti-Repetition**: Enhanced prompts to prevent repetitive content generation

### ğŸ”§ Improvements | åŠŸèƒ½æ”¹è¿›

- ğŸ¤– **Enhanced Storyline Generator**: Support for Structured Outputs and Tool Calling
- ğŸ”„ **Model Fetcher**: Improved Lambda AI model fetching with fallback defaults
- ğŸ’¾ **State Persistence**: Save/load long chapter mode and CosyVoice settings
- ğŸ¨ **UI Enhancements**: New checkboxes for long chapter and TTS features
- ğŸ“š **Prompt Modules**: Separated CosyVoice and anti-repetition prompts for maintainability

### ğŸ“š Documentation & Security | æ–‡æ¡£ä¸å®‰å…¨

- ğŸ“– **Complete Documentation**: Comprehensive bilingual guides (19 core documents)
- ğŸ”’ **Enhanced Security**: Automated security checks and improved .gitignore
- ğŸ›¡ï¸ **Data Protection**: Virtual environment and user data fully safeguarded
- ğŸ—ï¸ **System Architecture**: Detailed SYSTEM_DOCS.md with multi-agent system explanation

[View Full Changelog](#version-history--ç‰ˆæœ¬å†å²) | [æŸ¥çœ‹å®Œæ•´æ›´æ–°æ—¥å¿—](#version-history--ç‰ˆæœ¬å†å²)
```

## ä¸­æ–‡ç‰ˆæœ¬

```markdown
### ğŸ‰ v3.5.0 ç‰ˆæœ¬æ›´æ–° (2025-11-05)

**é‡å¤§åŠŸèƒ½æ›´æ–°ï¼** å¢å¼ºç”Ÿæˆèƒ½åŠ›ã€TTSæ”¯æŒå’Œç”Ÿäº§å°±ç»ªæ–‡æ¡£ã€‚

#### âœ¨ æ–°åŠŸèƒ½

- ğŸ™ï¸ **TTSæ–‡ä»¶å¤„ç†**ï¼šæ‰¹é‡å¤„ç†æ–‡æœ¬æ–‡ä»¶ï¼Œæ·»åŠ CosyVoice2æ ‡è®°ç”¨äºæœ‰å£°ä¹¦ç”Ÿæˆ
- ğŸ“ **é•¿ç« èŠ‚æ¨¡å¼**ï¼šé©å‘½æ€§çš„4æ®µå¼ç”Ÿæˆç³»ç»Ÿ
  - å°†æ¯ç« æ‹†åˆ†ä¸º4ä¸ªå™äº‹æ®µè½ï¼ˆå¼€ç«¯ã€å‘å±•ã€é«˜æ½®ã€ç»“å±€ï¼‰
  - æ¯æ®µç‹¬ç«‹ç”Ÿæˆå’Œæ¶¦è‰²ï¼Œæœ€åè‡ªåŠ¨åˆå¹¶
  - æ”¯æŒç”Ÿæˆæ›´é•¿ã€æ›´é«˜è´¨é‡çš„ç« èŠ‚
  - æ˜¾è‘—æå‡è´¨é‡ã€è¿è´¯æ€§ï¼Œå‡å°‘é‡å¤
  - æŠ€æœ¯ç»†èŠ‚è§ [LONG_CHAPTER_FEATURE.md](LONG_CHAPTER_FEATURE.md)
- ğŸ”§ **æ¨¡å—åŒ–é‡æ„**ï¼šapp.pyå’ŒAIGN.pyæ‹†åˆ†ä¸ºå¤šä¸ªå°æ¨¡å—
  - 18ä¸ªAIGNæ¨¡å—ï¼Œä»£ç ç»„ç»‡æ›´æ¸…æ™°
  - 4ä¸ªappæ¨¡å—ï¼ŒUIå’Œäº‹ä»¶å¤„ç†æ›´ç®€æ´
  - æ˜¾è‘—æå‡å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§
- ğŸ“Š **Tokenç»Ÿè®¡**ï¼šè‡ªåŠ¨ç”Ÿæˆè¿‡ç¨‹ä¸­å®æ—¶è¿½è¸ªAPI Tokenä½¿ç”¨æƒ…å†µ
- ğŸ§¹ **æ–‡æœ¬å‡€åŒ–**ï¼šè‡ªåŠ¨ç§»é™¤ç»“æ„åŒ–æ ‡ç­¾å’Œéæ­£æ–‡æ‹¬æ³¨
- ğŸ“– **æœ€è¿‘é¢„è§ˆ**ï¼šç•Œé¢ä»…æ˜¾ç¤ºæœ€è¿‘5ç« ï¼Œå‡è½»æµè§ˆå™¨è´Ÿæ‹…
- ğŸš« **é˜²é‡å¤æœºåˆ¶**ï¼šå¢å¼ºæç¤ºè¯é˜²æ­¢ç”Ÿæˆé‡å¤å†…å®¹

#### ğŸ”§ åŠŸèƒ½æ”¹è¿›

- ğŸ¤– **å¢å¼ºæ•…äº‹çº¿ç”Ÿæˆå™¨**ï¼šæ”¯æŒStructured Outputså’ŒTool Calling
- ğŸ”„ **æ¨¡å‹è·å–å™¨**ï¼šæ”¹è¿›Lambda AIæ¨¡å‹è·å–ï¼Œå¸¦å›é€€é»˜è®¤å€¼
- ğŸ’¾ **çŠ¶æ€æŒä¹…åŒ–**ï¼šä¿å­˜/åŠ è½½é•¿ç« èŠ‚æ¨¡å¼å’ŒCosyVoiceè®¾ç½®
- ğŸ¨ **ç•Œé¢å¢å¼º**ï¼šæ–°å¢é•¿ç« èŠ‚å’ŒTTSåŠŸèƒ½å¤é€‰æ¡†
- ğŸ“š **æç¤ºè¯æ¨¡å—åŒ–**ï¼šåˆ†ç¦»CosyVoiceå’Œé˜²é‡å¤æç¤ºè¯ï¼Œä¾¿äºç»´æŠ¤

#### ğŸ“š æ–‡æ¡£ä¸å®‰å…¨

- ğŸ“– **å®Œæ•´æ–‡æ¡£**ï¼šå…¨é¢çš„åŒè¯­æŒ‡å—ï¼ˆ19ä¸ªæ ¸å¿ƒæ–‡æ¡£ï¼‰
- ğŸ”’ **å®‰å…¨å¢å¼º**ï¼šè‡ªåŠ¨åŒ–å®‰å…¨æ£€æŸ¥å’Œæ”¹è¿›çš„.gitignore
- ğŸ›¡ï¸ **æ•°æ®ä¿æŠ¤**ï¼šè™šæ‹Ÿç¯å¢ƒå’Œç”¨æˆ·æ•°æ®å®Œå…¨ä¿æŠ¤
- ğŸ—ï¸ **ç³»ç»Ÿæ¶æ„**ï¼šè¯¦ç»†çš„SYSTEM_DOCS.mdï¼Œè§£é‡Šå¤šæ™ºèƒ½ä½“ç³»ç»Ÿ

[æŸ¥çœ‹å®Œæ•´æ›´æ–°æ—¥å¿—](#version-history--ç‰ˆæœ¬å†å²)
```

## ä½¿ç”¨è¯´æ˜

è¯·å°†ä¸Šè¿°å†…å®¹æ›¿æ¢README.mdä¸­å¯¹åº”çš„"What's New"éƒ¨åˆ†ã€‚
