# CosyVoice2 语音生成控制指南

## 概述
CosyVoice2 是阿里通义实验室开发的新一代语音合成系统，支持通过文本提示词精确控制生成语音的各种特征，包括语气、情感、停顿、方言等。

## 1. 角色扮演控制

### 格式
```
[角色描述]<|endofprompt|>[要朗读的文本]
```

### 示例
- **神秘角色**：`神秘<|endofprompt|>那座古老的城堡笼罩在神秘的雾气中`
- **机器人风格**：`机器人风格<|endofprompt|>我能够识别语音指令并执行相关操作`
- **讲故事风格**：`讲故事<|endofprompt|>从前有一座美丽的森林`
- **新闻播报**：`新闻播报<|endofprompt|>今日重要新闻如下`

## 2. 细粒度控制

### 2.1 停顿控制
- **短停顿**：使用逗号 `,`
- **长停顿**：使用句号 `。` 或感叹号 `！`
- **特殊停顿**：插入 `[breath]` 表示呼吸停顿

### 2.2 笑声和叹息
- **笑声**：`[laughter]` 或 `[笑]`
- **叹息**：`[sigh]` 或 `[叹气]`
- **哭泣**：`[crying]` 或 `[哭]`

### 2.3 重音强调
使用 `<strong>` 标签强调特定词语：
```
这个问题<strong>非常</strong>重要！
```

### 2.4 语速控制
- **快速**：`快速<|endofprompt|>文本内容`
- **慢速**：`慢速<|endofprompt|>文本内容`
- **正常**：`正常语速<|endofprompt|>文本内容`

## 3. 说话风格控制

### 常用风格
- **冷静**：`冷静<|endofprompt|>请保持冷静，我们会解决这个问题`
- **严肃**：`严肃<|endofprompt|>这是一个非常严肃的问题`
- **活泼**：`活泼<|endofprompt|>今天天气真好啊！`
- **温柔**：`温柔<|endofprompt|>别担心，一切都会好起来的`
- **神秘**：`神秘<|endofprompt|>你知道吗，这里隐藏着一个秘密`

## 4. 组合使用示例

### 示例1：情感+停顿
```
用兴奋的语气说：哇！[breath]我们终于成功了！这真是，[停顿]太不可思议了！
```

### 示例2：角色+重音
```
老师风格<|endofprompt|>同学们，今天我们要学习的<strong>重点</strong>内容是物理定律。
```

### 示例3：方言+情感
```
用粤语说，开心的语气：今日真系好开心啊！
```

## 5. 小说文本应用建议

### 5.1 对话场景
为不同角色设置不同的语音风格：
- **主角**：`自信<|endofprompt|>我一定能够完成这个任务`
- **反派**：`阴险<|endofprompt|>你以为你能逃得掉吗？`
- **智者**：`睿智<|endofprompt|>年轻人，让我告诉你一个道理`

### 5.2 叙述部分
- **紧张场景**：`紧张<|endofprompt|>夜色渐深，[breath]森林中传来诡异的声音`
- **温馨场景**：`温暖<|endofprompt|>阳光洒在小屋上，一切都是那么美好`
- **悬疑场景**：`神秘<|endofprompt|>没有人知道，[停顿]那扇门后面究竟隐藏着什么`

### 5.3 情绪转折
```
开始用平静的语气：一切看起来都很正常。
[情绪转折]
用惊恐的语气说：突然！[breath]一个黑影从角落里窜了出来！
```

## 6. 最佳实践

### 6.1 提示词放置
- 将角色/风格提示词放在文本开头
- 情感提示词可以插入到具体句子前
- 细粒度控制（如停顿、重音）直接嵌入文本中

### 6.2 避免过度使用
- 不要在一句话中使用过多控制标记
- 保持自然的语言流畅性
- 适度使用停顿和重音

### 6.3 测试和调整
- 先用简单的提示词测试效果
- 根据实际生成效果调整提示词
- 为不同场景创建模板

## 7. 高级技巧

### 7.1 动态情感变化
```
平静<|endofprompt|>起初一切都很平静。[emotion_change]惊讶<|endofprompt|>但是突然发生了意想不到的事情！
```

### 7.2 多层次控制
```
老年人+温柔+慢速<|endofprompt|>孩子，让爷爷慢慢告诉你这个故事...
```

### 7.3 场景氛围营造
```
恐怖氛围<|endofprompt|>[whisper]你听到了吗？[breath][停顿]好像有什么东西在靠近...[scream]啊！
```

## 8. 注意事项

1. **兼容性**：确保使用的提示词格式与CosyVoice2版本兼容
2. **文本长度**：过长的文本可能影响控制效果，建议分段处理
3. **特殊字符**：避免在提示词中使用可能造成解析错误的特殊字符
4. **语言限制**：某些控制可能只适用于特定语言

## 结语

CosyVoice2的提示词系统为AI生成小说的语音化提供了强大的控制能力。通过合理使用这些控制技术，可以让生成的语音更加生动、富有表现力，大大提升听众的沉浸感和体验质量。建议在实际应用中根据具体场景和需求，灵活组合使用各种控制技术。